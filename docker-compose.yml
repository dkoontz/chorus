services:
  chorus:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "${CHORUS_PORT:-8080}:8080"
    volumes:
      # Mount application data directory
      # Host path can be configured via DATA_PATH environment variable
      - "${DATA_PATH:-./docker-data}:/app/data"
      # Mount Claude Code config for auth persistence
      - "${CLAUDE_CONFIG_PATH:-./docker-data/.claude}:/root/.claude"
    environment:
      - CHORUS_HOST=0.0.0.0
      - CHORUS_PORT=8080
      - CHORUS_DATA_DIR=/app/data
      - CHORUS_STATIC_DIR=/app/static
      - CHORUS_UPLOAD_DIR=/app/data/uploads
      - CHORUS_LOG_LEVEL=${CHORUS_LOG_LEVEL:-info}
    restart: unless-stopped
